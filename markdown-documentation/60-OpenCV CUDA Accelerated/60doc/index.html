
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../30-UCSD%20Robocar%20Jetson%20Nano%20Configuration/30-UCSD%20Robocar%20Jetson%20Nano%20Configuration/">
      
      
        <link rel="next" href="../../15-VESC%20Setup%20Instructions/15-VESC%20Setup%20Instructions/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.0">
    
    
      
        <title>OpenCV With CUDA Acceleration - ECE/MAE 148</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.9f615399.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.649f08f9.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#installing-an-open-source-computer-vision-opencv-package-with-cuda" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="ECE/MAE 148" class="md-header__button md-logo" aria-label="ECE/MAE 148" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ECE/MAE 148
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              OpenCV With CUDA Acceleration
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/arobotdinosaur/ucsd-ecemae-148.github.io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="ECE/MAE 148" class="md-nav__button md-logo" aria-label="ECE/MAE 148" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    ECE/MAE 148
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/arobotdinosaur/ucsd-ecemae-148.github.io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../50-Virtual%20Machine%20with%20DonkeyCar%20AI%20Simulator/50-Virtual%20Machine%20and%20DonkeyCar%20AI%20Simulator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DonkeySimulator
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../50-Virtual%20Machine%20with%20DonkeyCar%20AI%20Simulator/Donkeysim%20on%20an%20ARM%20Chip%20Mac/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DonkeySimulator Mac
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../30-UCSD%20Robocar%20Jetson%20Nano%20Configuration/30-UCSD%20Robocar%20Jetson%20Nano%20Configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jetson Initial Setup
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    OpenCV With CUDA Acceleration
  </span>
  

      </a>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../15-VESC%20Setup%20Instructions/15-VESC%20Setup%20Instructions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VESC Setup
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../10-UCSD%20Robocar%20ECE%20%26%20MAE%20148/10doc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DonkeyCar Installation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../10-UCSD%20Robocar%20ECE%20%26%20MAE%20148/11doc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GPS Laps
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../100-UCSD%20Robocar%20Framework/100-UCSD%20Robocar%20Framework/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UCSD Robocar Framework
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../ROS2_Guide_Book.pdf" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ROS2 Guidebook
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Winter 23
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Winter 23
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../win23team1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Team 1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../win23team2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Team 2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../win23team3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Team 3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../win23team4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Team 4
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../win23team5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Team 5
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../win23team6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Team 6
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../win23team7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Team 7
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../win23team8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Team 8
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../win23team9/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Team 9
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../win23team12/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Team 12
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../win23team13/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Team 13
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../win23team14/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Team 14
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../win23team15/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Team 15
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="installing-an-open-source-computer-vision-opencv-package-with-cuda">Installing an Open Source Computer Vision (OpenCV) package with CUDA</h1>
<p>Support</p>
<p># As of Jan 2020, NVIDIA is not providing OpenCV optimized to use CUDA
(GPU acceleration).</p>
<p># Search the web if you are curious why.</p>
<p>#
<a href="https://forums.developer.nvidia.com/t/opencv-cuda-python-with-jetson-nano/72902">[https://forums.developer.nvidia.com/t/opencv-cuda-python-with-jetson-nano/72902]{.underline}</a></p>
<p>Youtube Video about the process:
<a href="https://www.youtube.com/watch?v=art0-99fFa8">https://www.youtube.com/watch?v=art0-99fFa8</a></p>
<h1 id="checking-opencv-build-information">Checking openCV build information</h1>
<p>ssh to the Single Board Computer (SBC)</p>
<p>Check to see if OpenCV for CUDA is available, search on the terminal
output for CUDA),</p>
<p>if not, we build OpenCV from source to use CUDA Acceleration</p>
<p>From a terminal:</p>
<pre><code>python

\&gt;\&gt;import cv2

\&gt;\&gt;print cv2.getBuildInformation()

\&gt;\&gt;exit ()
</code></pre>
<p>ex:</p>
<p>NVIDIA CUDA: YES (ver 10.2, CUFFT CUBLAS FAST_MATH)</p>
<p>NVIDIA GPU arch: 53 62 72</p>
<p>NVIDIA PTX archs:</p>
<p>cuDNN: YES (ver 8.0)</p>
<p>OpenCL: YES (no extra features)</p>
<p>Include path: /tmp/build_opencv/opencv/3rdparty/include/opencl/1.2</p>
<p>Link libraries: Dynamic load</p>
<p>You can also use jtop to check if OpenCV was compiled with CUDA.</p>
<p>jtop</p>
<p>6</p>
<p><img alt="" src="../60images/media/image15.png" />
# If OpenCV is not using CUDA acceleration, let\'s build and install
the latest OpenCV optimized</p>
<p># for CUDA</p>
<p># As of 03Apr2022, I have not seen NVIDIA supplying OpenCV GPU
accelerated on their</p>
<p># JetPack. We need to compile it from source. If you ask me, nice
experience for you.</p>
<p># Let's do this</p>
<h1 id="_1"></h1>
<h1 id="installing-opencv-with-cuda">Installing openCV with CUDA</h1>
<p><strong># This step may take several hours</strong> <strong>to compile and build OpenCV in
a SBC such as the</strong></p>
<p><strong># Jetson Nano (JTN) or Jetson Xavier NX (JNX). It took my JTN four
hours to complete.</strong></p>
<p><strong># For the JTN, please make sure the fan is installed including
software to enable high CPU power mode</strong></p>
<p># Better do it overnight. Be patient, please keep in mind that you are
using a low power single board computer (SBC)</p>
<p># Make sure you are using the external power supply to power the
jetson, not a USB cable.</p>
<p>#
<a href="https://devtalk.nvidia.com/default/topic/1054949/process-to-install-opencv-4-1-on-nano/">[https://devtalk.nvidia.com/default/topic/1054949/process-to-install-opencv-4-1-on-nano/]{.underline}</a></p>
<p>#
<a href="https://github.com/mdegans/nano_build_opencv">[https://github.com/mdegans/nano_build_opencv]{.underline}</a></p>
<p># Please make sure your computer will not sleep so you maintain an
active ssh connection</p>
<p># while you are building OpenCV because you will need to type the user
jetson password</p>
<p># again to complete the install.</p>
<p># Reconnecting on the same ssh session is not trivial</p>
<p><img alt="" src="../60images/media/image11.png" /></p>
<h2 id="using-a-linux-host-use-screen"># Using a Linux Host? Use Screen</h2>
<p># You should consider using
<a href="https://ma.ttias.be/screen-a-must-for-ssh/">screen</a> to
enable you to reconnect to a previous ssh session.</p>
<p># Do you need to install screen?</p>
<p>sudo apt-get install screen</p>
<p># From a terminal on Linux host or on your VM:</p>
<p>screen</p>
<p># ssh jetson@ name of IP address of your machine</p>
<p>ssh jetson@ucsdrobocar-xxx-yy.local</p>
<p># If you get disconnected, open a terminal again on your computer then
type</p>
<p>screen -r</p>
<p># screen -r should reconnect to the previous ssh session that was open</p>
<p># Here is some more detailed information on using screen</p>
<p><a href="https://www.howtogeek.com/howto/ubuntu/keep-your-ssh-session-running-when-you-disconnect">[https://www.howtogeek.com/howto/ubuntu/keep-your-ssh-session-running-when-you-disconnect]{.underline}</a></p>
<p><em># if not installed in your host</em></p>
<p><em>sudo apt-get install screen</em></p>
<p><em>Now you can start a new screen session by just typing screen at the
command line. You'll be shown some information about screen. Hit enter,
and you'll be at a normal prompt.</em></p>
<p><em>To disconnect (but leave the session running)</em></p>
<p><em>Hit Ctrl + A and then Ctrl + D in immediate succession. You will see
the message [detached]</em></p>
<p><em>To reconnect to an already running session</em></p>
<p><em>screen -r</em></p>
<p><em>To reconnect to an existing session, or create a new one if none
exists</em></p>
<p><em>screen -D -r</em></p>
<p># More info on using screen</p>
<p><a href="https://ma.ttias.be/screen-a-must-for-ssh/">[https://ma.ttias.be/screen-a-must-for-ssh/]{.underline}</a></p>
<p><em>screen -ls</em></p>
<p><em>There are screens on:</em></p>
<p><em>27111.screen_untarring (Detached)</em></p>
<p><em>27097.screen_disking (Detached)</em></p>
<p><em>2 Sockets in /var/run/screen/S-root.</em></p>
<p><em>This will show a list of all running screen-sessions at any given time.
You can pick up a previous screen-session, by typing</em></p>
<p><em>screen -r \&lt;name_of_session&gt;</em></p>
<p><em>screen -r</em></p>
<h2 id="_2"></h2>
<p># Since your SBC will be busy, how can you see it is working for you?</p>
<p>#</p>
<p># Besides htop or top, there is another cool utility called
<a href="https://github.com/rbonghi/jetson_stats">jetson_stats</a></p>
<p>sudo apt-get install python3-pip</p>
<p>sudo -H pip3 install -U jetson-stats</p>
<p># reboot</p>
<p>sudo reboot now</p>
<p># Then you can run</p>
<p>jtop</p>
<p>4</p>
<p>You can use jtop to add more swap space using the left and right keys
and clicking the plus button</p>
<p><img alt="" src="../60images/media/image8.png" /></p>
<p>Add 4G of swap and press \&lt;S&gt; to enable it.</p>
<p><img alt="" src="../60images/media/image5.png" /></p>
<h2 id="removing-old-version-of-opencv">Removing old version of OpenCV</h2>
<p># First lets remove the current OpenCV version and reboot the JTN</p>
<p>sudo sudo apt-get purge *libopencv*</p>
<p>sudo reboot now</p>
<h2 id="compiling-opencv-from-source">Compiling OpenCV from source</h2>
<p># screen then ssh back to the SBC</p>
<p># If needed, create the \~/projects directory</p>
<p>cd\~</p>
<p>mkdir projects</p>
<p>cd projects</p>
<p># For Jetson Nano</p>
<p>git clone
<a href="https://github.com/mdegans/nano_build_opencv.git">https://github.com/mdegans/nano_build_opencv.git</a></p>
<p>cd nano_build_opencv</p>
<p># For the Jetson Nano, lets modify the script to use 2 CPU cores vs. 1.</p>
<p># Note: for the TX2 and Xaviers the script automatically uses more CPU
cores.</p>
<p># Need to modify the configuration for the CUDNN we are using</p>
<p># First see what you have installed using jtop use option INFO press 7</p>
<p><img alt="" src="../60images/media/image13.png" /></p>
<p><img alt="" src="../60images/media/image4.png" /></p>
<h1 id="remove-the-87-from-the-cuda_arch_bin-version-it-causes-a">Remove the 8.7 from the CUDA_ARCH_BIN version, it causes a</h1>
<p>compatibility issue</p>
<h1 id="also-make-sure-the-cudnn_version80-it-will-fail-otherwise">Also, make sure the CUDNN_VERSION='8.0', it will fail otherwise</h1>
<p>nano build_opencv.sh</p>
<p># modify this line to have JOBS=2</p>
<p>else</p>
<p>JOBS=1 # you can set this to 4 if you have a swap file</p>
<p>JOBS=2</p>
<p># save the file / exit nano</p>
<p>#
<a href="https://opencv.org/releases/">https://opencv.org/releases/</a></p>
<p># look for the latest version</p>
<p><img alt="" src="../60images/media/image3.png" /></p>
<p># As of 24Nov23, <strong>4.8.0</strong> is the latest version</p>
<p># You can use jtop to have Jetson Clocks enabled to improve the
performance of the Jetson</p>
<p># 6 CTRL and then press s</p>
<p># To make it enabled at boot too, press e</p>
<p><img alt="" src="../60images/media/image14.png" /></p>
<p># From a terminal</p>
<pre><code>./build_opencv.sh 4.8.0
</code></pre>
<p># Again, this will take a good while. You may consider doing this at
night before you go to bed. It is really boring</p>
<p># after a while (hours) looking that the SBC compile and build OpenCV
from source</p>
<p># Please make sure the computer you are using to SSH, disable sleep,
and if using a notebook computer</p>
<p># have in connected to the charger</p>
<p># Preferable you use screen before ssh to be able to reconnect in</p>
<p># case your computer lose the SSH connection.</p>
<p># If you wish, you can see that the SBC cores of the CPU are</p>
<p># busy by opening another terminal or a new tab on the same terminal
window then</p>
<p># ssh to the SBC and run the command top</p>
<p># I like better jtop (if needed, install htop or jtop).</p>
<p>#</p>
<p># ex:</p>
<p><img alt="" src="../60images/media/image7.png" /></p>
<p># After a few hours you see that you need to enter a little information
to finish the build. That is when we have</p>
<p># problems if you get disconnected from your SSH</p>
<p># You can leave the temporary builds in place</p>
<p>Do you wish to remove temporary build files in /tmp/build_opencv ?</p>
<p>(Doing so may make running tests on the build later impossible)</p>
<p>Y/N <strong>y</strong></p>
<p><strong># Enter y</strong></p>
<p># save some space on disc</p>
<h1 id="checking-the-install">Checking the Install</h1>
<p># When the installation is complete, let\'s check the version of OpenCV
that was installed</p>
<p># First reboot SBC</p>
<p>sudo reboot now</p>
<p># ssh back to the SBC</p>
<h1 id="using-jtop-to-confirm-the-opencv-gpu-cuda-compiled">Using jtop to confirm the OpenCV GPU (CUDA) compiled</h1>
<p>jtop</p>
<p>7 INFO</p>
<p># look for the OpenCV version and that it was compiled with CUDA</p>
<p><img alt="" src="../60images/media/image12.png" /></p>
<p><img alt="" src="../60images/media/image9.png" />{</p>
<h2 id="lets-make-sure-python3-finds-opencv-cv2"># Let's make sure Python3 finds OpenCV (CV2)</h2>
<p># Need to adapt this for the python and OpenCV versions that you are
using</p>
<blockquote>
<p>python3 -c \'import cv2 as cv; print(cv.__version__)\'</p>
<h1 id="traceback-most-recent-call-last">Traceback (most recent call last):</h1>
<h1 id="file-string-line-1-in-module">File \"\&lt;string&gt;\", line 1, in \&lt;module&gt;</h1>
<h1 id="modulenotfounderror-no-module-named-cv2">ModuleNotFoundError: No module named \'cv2\'</h1>
</blockquote>
<p># If you don't see the version of the OpenCV that you built listed, it
might be because you forgot to delete the previous OpenCV version that was installed, go back to this document "Removing
old version of OpenCV" and then build and install OpenCV again. If OpenCV shows up in jtop then disregard this, there is some other issue preventing it from showing up.</p>
<p># What version of python3 do you have?</p>
<p>python3</p>
<h1 id="python-3810-default-may-26-2023-140508">Python 3.8.10 (default, May 26 2023, 14:05:08)</h1>
<h1 id="gcc-940-on-linux">[GCC 9.4.0] on linux</h1>
<h1 id="type-help-copyright-credits-or-license-for-more">Type \"help\", \"copyright\", \"credits\" or \"license\" for more</h1>
<p>information.</p>
<p>&gt;&gt;&gt; exit()</p>
<p>ex:</p>
<pre><code>cd /usr/local/lib/python3.6/site-packages/cv2/python-3.6
</code></pre>
<p># or</p>
<pre><code>cd /usr/local/lib/python3.8/site-packages/cv2/python-3.8
</code></pre>
<p># remove the previous cv2.so in case it is still there.</p>
<pre><code>sudo rm -rf cv2.so
</code></pre>
<pre><code>mv cv2.cpython-36m-[xxx]-linux-gnu.so cv2.so
</code></pre>
<pre><code>ls cv2.\*
</code></pre>
<pre><code>cv2.cpython-38-aarch64-linux-gnu.so
</code></pre>
<pre><code>ln -s
/usr/local/lib/python3.8/site-packages/cv2/python-3.8cv2.cpython-38-aarch64-linux-gnu.so
cv2.so cv2.so
</code></pre>
<pre><code>sudo cp cv2.cpython-36m-aarch64-linux-gnu.so cv2.so
</code></pre>
<p># or</p>
<pre><code>sudo cp cv2.cpython-38-aarch64-linux-gnu.so cv2.so
</code></pre>
<p># Alternatively you could just rename the file</p>
<pre><code>sudo mv cv2.cpython-36m-aarch64-linux-gnu.so cv2.so
</code></pre>
<pre><code>sudo cp cv2.cpython-38-aarch64-linux-gnu.so cv2.so
</code></pre>
<p># Lets create a link at the home directory for cv2</p>
<pre><code>cd \~
</code></pre>
<pre><code>sudo rm -rf cv2.so
</code></pre>
<pre><code>ln -s /usr/local/lib/python3.6/site-packages/cv2/python-3.6/cv2.so
cv2.so
</code></pre>
<p># or</p>
<pre><code>ln -s /usr/local/lib/python3.8/site-packages/cv2/python-3.8/cv2.so
cv2.so
</code></pre>
<p>Checking install for python3</p>
<pre><code>python3

import cv2

cv2.\_\_version\_\_

exit ()
</code></pre>
<p># Resulting on something similar to this</p>
<p><strong>jetson@ucsdrobocar-xxx-yy</strong>:<strong>\~</strong>\$ python3</p>
<p>Python 3.6.9 (default, Jun 29 2022, 11:45:57)</p>
<p>[GCC 8.4.0] on linux</p>
<p>Type \"help\", \"copyright\", \"credits\" or \"license\" for more
information.</p>
<p>&gt;&gt;&gt; import cv2</p>
<p>&gt;&gt;&gt; cv2.__version__</p>
<p>\'4.6.0\'</p>
<p>&gt;&gt;&gt; exit()</p>
<p><strong>jetson@ucsdrobocar-xxx-yy</strong>:<strong>\~</strong>\$</p>
<blockquote>
<p>Python 3.8.10 (default, May 26 2023, 14:05:08)</p>
<p>[GCC 9.4.0] on linux</p>
<p>Type \"help\", \"copyright\", \"credits\" or \"license\" for more
information.</p>
<p>&gt;&gt;&gt; import cv2</p>
<p>&gt;&gt;&gt; cv2.__version__</p>
<p>\'4.8.0\'</p>
<p>&gt;&gt;&gt; exit ()</p>
</blockquote>
<p># Here is quicker way to test cv2 on Python 3</p>
<pre><code>python3 -c \'import cv2 as cv; print(cv.\_\_version\_\_)\'
</code></pre>
<blockquote>
<p>4.6.0</p>
<p># or</p>
<p>4.8.0</p>
</blockquote>
<p><strong>end of Installing an Open Source Computer Vision (OpenCV) package with
CUDA Support</strong></p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.a264c092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.4e0fa4ba.min.js"></script>
      
    
  </body>
</html>